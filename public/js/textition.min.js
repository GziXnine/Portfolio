(v=>{v.fn.textition=function(t){function e(){v(this).css({"-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","-o-transform-style":"preserve-3d","transform-style":"preserve-3d","-webkit-transition":"opacity "+o.speed+"s "+o.animation,"-moz-transition":"opacity "+o.speed+"s "+o.animation,"-ms-transition":"opacity "+o.speed+"s "+o.animation,"-o-transition":"opacity "+o.speed+"s "+o.animation,transition:"opacity "+o.speed+"s "+o.animation,position:"absolute",display:"block",width:m.width,left:m.left,top:m.top})}function s(){v(this).css({"-webkit-transition":"-webkit-transform "+o.speed+"s "+o.animation,"-moz-transition":"-moz-transform "+o.speed+"s "+o.animation,"-ms-transition":"-ms-transform "+o.speed+"s "+o.animation,"-o-transition":"-o-transform "+o.speed+"s "+o.animation,transition:"transform "+o.speed+"s "+o.animation,display:"inline-block"})}function a(){for(var t,e=v(this),s=e.text(),a="",i=0;i<s.length;i++)a+="<l>"+(t=" "===(t=s[i])?"&nbsp;":t)+"</l>";e.html(a)}var i,n,r,o=v.extend({map:{x:100,y:50,z:1e3},speed:1,animation:"ease",handler:"click",perspective:300,autoplay:!1,interval:3,element:this},t),t=this,p=this.children(),c=0,m={},l=function(t){return Math.round(Math.random()*t)-t/2},f=function(){var t,e=0,s=0,a=0;for(t in o.map)switch(t){case"x":e=l(o.map.x);break;case"y":s=l(o.map.y);break;case"z":a=l(o.map.z)}v(this).css({"-webkit-transform":"translate3d("+e+"px, "+s+"px, "+a+"px)","-moz-transform":"translate3d("+e+"px, "+s+"px, "+a+"px)","-ms-transform":"translate3d("+e+"px, "+s+"px, "+a+"px)","-o-transform":"translate3d("+e+"px, "+s+"px, "+a+"px)",transform:"translate3d("+e+"px, "+s+"px, "+a+"px)"})},d=function(){v(this).css({"-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transform":"translate3d(0px, 0px, 0px)","-ms-transform":"translate3d(0px, 0px, 0px)","-o-transform":"translate3d(0px, 0px, 0px)",transform:"translate3d(0px, 0px, 0px)"})},x=function(t){o.autoplay&&t&&!t.isTrigger&&(clearInterval(i),i=setInterval(h,1e3*o.interval)),v(p[c]).css("opacity",0).children().each(f),++c>p.length-1&&(c=0),v(p[c]).css("opacity",1).children().each(d)},h=function(){x()};n=p.first(),m.top=n.offset().top-t.offset().top,m.left=n.offset().left-t.offset().left,m.width=n.width(),(n=p.not(":first")).hide().css("opacity",0),r=t.css("position"),t.css({"-webkit-perspective":o.perspective+"px","-moz-perspective":o.perspective+"px","-ms-perspective":o.perspective+"px","-o-perspective":o.perspective+"px",perspective:o.perspective+"px",position:"static"===r?"relative":r,height:t.height(),width:t.width()}),p.each(a),p.each(e),t.find("l").each(s),n.show().children().each(f),o.handler&&o.element.bind(o.handler,x),o.autoplay&&(i=setInterval(h,1e3*o.interval))}})(jQuery);